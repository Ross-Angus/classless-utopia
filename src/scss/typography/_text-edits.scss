@use '../vars-sass' as v;

ins, del {
  border-top: solid var(--keyline) var(--tint5);
  font-size: var(--smalltext-size);
  line-height: var(--smalltext-line-height);
  max-width: 10rem;
  position: relative;
  text-decoration: none;

  // Heading
  &::before {
    content: attr(title);
    display: block;
    font-weight: var(--heading-weight);
  }
}

ins {
  clear: left;
  float: left;
  padding: calc(var(--gutter) / 2) var(--gutter) var(--gutter) 0;

  &::after {
    left: var(--gutter);
    right: 0;
  }
}

del {
  clear: right;
  float: right;
  padding: calc(var(--gutter) / 2) 0 var(--gutter) var(--gutter);

  &::after {
    left: 0;
    right: var(--gutter);
  }
}

// Where there's enough space, the `ins` and `del` elements appear
// inside the gutter between the `main` and `article` tags
@media (width > v.$site-width) {
  main {
    article {
      position: relative;

      ins, del {
        border: none;
        display: block;
        float: none;
        padding: calc(var(--gutter) / 2) var(--gutter);
        position: absolute;
        // This is used to line up the connecting line with the
        // ascender of the inline box
        transform: translate(0, calc(var(--bodytext-size) / 2.6));
        // Desktop size: the gap between the site width and the content
        // width
        width: calc((var(--site-width) - var(--content-width)) / 2);
        // The `top` value if not specified will match where the element
        // would appear in the original text, if not removed from the
        // document flow

        // Connecting line
        // This needs to be an pseudo-element rather than a border because
        // it needs to be offset slightly and I want to share other
        // declarations between `del` and `ins`.
        &::after {
          background: var(--tint5);
          content: "";
          height: var(--keyline);
          position: absolute;
          top: 0;
        }
      }

      ins { right: 100%; }

      del { left: 100%; }
    }
  }
}
